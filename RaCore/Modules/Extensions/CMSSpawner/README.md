# CMSSpawner Module

## Overview

The CMSSpawner module is an AI-powered CMS generation tool that automatically creates and deploys a PHP 8+ homepage with SQLite database integration. It bridges .NET 10 and PHP 8+ technologies, enabling rapid web presence deployment directly from the RaCore mainframe.

## Features

- ✅ **Automatic PHP CMS Generation**: Creates a complete, working PHP CMS with one command
- ✅ **SQLite Database**: Lightweight, file-based database for easy deployment
- ✅ **PHP 8+ Compatible**: Modern PHP features and best practices
- ✅ **Admin Panel**: Built-in admin dashboard for content management
- ✅ **AI-Ready**: Designed for AI-powered content generation and updates
- ✅ **Zero Configuration**: Works out of the box with sensible defaults
- ✅ **Extensible**: Easy to add new pages, modules, and features

## Requirements

- **PHP 8.0 or higher** with SQLite3 extension
- .NET 10 (RaCore)
- SQLite support (built-in with RaCore)

## Installation

### PHP Installation

**Linux (Ubuntu/Debian):**
```bash
sudo apt update
sudo apt install php8.2-cli php8.2-sqlite3
```

**macOS:**
```bash
brew install php
```

**Windows:**
Download from [https://windows.php.net/download/](https://windows.php.net/download/)

## Usage

### Commands

```
cms spawn         - Create PHP CMS homepage with SQLite database
cms spawn home    - Same as 'cms spawn'
cms status        - Show CMS deployment status
cms detect php    - Detect PHP runtime version
help              - Show help message
```

### Quick Start

1. **Detect PHP:**
   ```
   cms detect php
   ```

2. **Spawn the CMS:**
   ```
   cms spawn
   ```

3. **Start the PHP server:**
   ```bash
   cd cms_homepage
   php -S localhost:8080
   ```

4. **Access the CMS:**
   - Homepage: http://localhost:8080
   - Admin Panel: http://localhost:8080/admin.php
   - Default credentials: `admin` / `admin123`

## Generated Structure

```
cms_homepage/
├── index.php           # Homepage (public)
├── admin.php           # Admin panel (login required)
├── config.php          # Configuration settings
├── db.php              # Database layer (SQLite PDO)
├── styles.css          # Stylesheet
└── cms_database.sqlite # SQLite database file
```

## Database Schema

### Tables

**pages**
- `id` (INTEGER PRIMARY KEY)
- `title` (TEXT)
- `content` (TEXT)
- `slug` (TEXT UNIQUE)
- `created_at` (TEXT)
- `updated_at` (TEXT)

**settings**
- `key` (TEXT PRIMARY KEY)
- `value` (TEXT)

**users**
- `id` (INTEGER PRIMARY KEY)
- `username` (TEXT UNIQUE)
- `password` (TEXT)
- `email` (TEXT)
- `created_at` (TEXT)

## Security

### Current Implementation

- Session-based authentication
- SQLite prepared statements (SQL injection protection)
- Basic password validation
- Session lifetime controls

### Production Recommendations

⚠️ **Before deploying to production:**

1. **Change default credentials** in the admin panel
2. **Implement proper password hashing** (currently uses simple comparison)
3. **Enable HTTPS** with valid certificates
4. **Configure proper file permissions** (644 for files, 755 for directories)
5. **Set production error handling** (disable error display)
6. **Implement rate limiting** for login attempts
7. **Add CSRF protection** for forms
8. **Regular database backups**

### Recommended PHP Configuration (production)

```php
// In config.php
error_reporting(0);
ini_set('display_errors', '0');
ini_set('session.cookie_secure', 1);  // HTTPS only
ini_set('session.cookie_samesite', 'Strict');
```

## Customization

### Adding New Pages

```php
// Through the admin panel, or programmatically:
$db = Database::getInstance();
$db->createPage('About Us', '<h2>About</h2><p>Content here</p>', 'about');
```

### Changing Site Settings

```php
$db = Database::getInstance();
$db->setSetting('site_title', 'My Custom Title');
$db->setSetting('site_description', 'My site description');
```

### Custom Styling

Edit `styles.css` to customize the appearance. The default theme uses a purple gradient design.

## AI Integration

The CMS is designed to work with RaCore's AI modules:

- Content can be generated by AI and inserted into pages
- Settings can be updated programmatically
- Future modules can extend functionality (blog, forums, etc.)
- API endpoints can be added for AI-driven updates

## Extending the CMS

### Adding New Features

1. Create new PHP files in `cms_homepage/`
2. Add database tables as needed
3. Update the admin panel for management
4. Link from `index.php` or navigation

### Example: Blog Module

```php
// In cms_database.sqlite
CREATE TABLE blog_posts (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    title TEXT NOT NULL,
    content TEXT,
    published_at TEXT,
    author_id INTEGER
);
```

## Troubleshooting

### PHP Not Found

```
Error: PHP runtime not found
```

**Solution:** Install PHP 8.0+ and ensure it's in your PATH

### Permission Denied

```
Error: Cannot create cms_homepage directory
```

**Solution:** Check directory permissions where RaCore is running

### Database Locked

```
Error: Database is locked
```

**Solution:** Close other connections to the SQLite database

### Port Already in Use

```
Error: Address already in use
```

**Solution:** Use a different port: `php -S localhost:8081`

## Deployment Options

### Local Development
```bash
php -S localhost:8080
```

### Apache (Production)
```apache
<VirtualHost *:80>
    ServerName example.com
    DocumentRoot /path/to/cms_homepage
    <Directory /path/to/cms_homepage>
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>
```

### Nginx (Production)
```nginx
server {
    listen 80;
    server_name example.com;
    root /path/to/cms_homepage;
    index index.php;

    location ~ \.php$ {
        fastcgi_pass unix:/var/run/php/php8.2-fpm.sock;
        fastcgi_index index.php;
        include fastcgi_params;
    }
}
```

### Docker
```dockerfile
FROM php:8.2-apache
RUN apt-get update && apt-get install -y sqlite3 libsqlite3-dev
COPY cms_homepage/ /var/www/html/
RUN chown -R www-data:www-data /var/www/html
EXPOSE 80
```

## Technology Stack

- **Backend**: PHP 8.2+
- **Database**: SQLite 3
- **Mainframe**: .NET 10 (RaCore)
- **Frontend**: HTML5, CSS3, vanilla JavaScript
- **Server**: PHP Built-in Server (development), Apache/Nginx (production)

## Future Enhancements

Planned features:
- [ ] Blog module with posts and comments
- [ ] User roles and permissions
- [ ] Theme system with multiple templates
- [ ] Plugin architecture
- [ ] RESTful API for external integrations
- [ ] Markdown editor for content
- [ ] Image upload and media library
- [ ] SEO optimization tools
- [ ] Analytics dashboard
- [ ] Multi-language support

## Contributing

To add features to the CMSSpawner module:

1. Update `CMSSpawnerModule.cs` with new commands
2. Add new PHP templates as needed
3. Update this README with documentation
4. Test thoroughly before committing

## License

Part of the RaCore project. See main repository for license information.

## Support

For issues or questions:
- Check the RaCore documentation
- Review PHP error logs
- Verify PHP and SQLite are properly installed
- Ensure proper file permissions

---

**Generated by RaCore CMSSpawner Module**  
**Version**: 1.0  
**Last Updated**: 2025-01-05
